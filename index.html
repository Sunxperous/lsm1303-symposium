<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>reveal.js â€“ The HTML Presentation Framework</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Personal CSS -->
    <link rel="stylesheet" href="css/custom.css">
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section id="scene1" data-background-video="videos/Sunshine.mov" data-background-video-loop>
          <span>The case of the Grey Herons (Ardea cinerea): The effect of conspecifics on foraging efficiency of territorial feeders at Pasir Ris Park</span>
          <h2>Presented by</h2>
          <ul>
            <li>Ang WeiLi (A0114600B)</li>
            <li>Han En Chou (A0081241U)</li>
            <li>Kong Li Xian Roxanne (A0116165L)</li>
            <li>Sun Wang Jun (A0110546R)</li>
            <li>Wong Si Ying Vinncent (A0111888X)</li>
          </ul>
        </section>

        <section id="scene2" data-background-video="videos/Handsome.mov">
        </section>
        
        <section id="scene2a" data-background-video="videos/Fluffy.mov">
          <!-- Maybe move scene2a video into scene2 -->
        </section>

        <section id="scene3">
          <p>
            <h1>Motivation of Study</h1>
            <span>Want to observe interactions with conspecifics</span>
          </p>
          <div class="fragment">
            <h1>Hypothesis</h1>
            <ol>
              <li>Shorter distance between conspecifics => Reduction in foraging efficiency</li>
              <li>Higher number of conspecifics => Reduction in foraging efficiency</li>
            </ol>
          </div>
        </section>

        <section id="scene4">
          <h1>Map</h1>
        </section>

        <section id="scene5">
          <h1>Tide Levels</h1>
        </section>
        
        <section id="scene6">
          <h1>Equipment</h1>
          <table>
            <thead>
              <tr>
                <th>Camera model</th>
                <th>Sensor width /mm</th>
                <th>Sensor height /mm</th>
                <th>Image resolution /(w x h)px</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Canon EOS Kiss X5</td>
                <td>22.3</td>
                <td>14.9</td>
                <td>5184x3456<br>5184x2192</td>
              </tr>
              <tr>
                <td>Canon EOS 5D Mark II</td>
                <td>36</td>
                <td>24</td>
                <td>5184x3456</td>
              </tr>
              <tr>
                <td>Casio EX-ZR50</td>
                <td>6.17</td>
                <td>4.55</td>
                <td>4608x3456</td>
              </tr>
              <tr>
                <td>Oppo R7s</td>
                <td>4.69</td>
                <td>3.52</td>
                <td>4160x2340<br>6656x3744</td>
              </tr>
            </tbody>
          </table>
        </section>

        <section id="scene7" data-background="images/alloccurrence.png" data-background-size="700px" data-state="img-bottom-right">
          <h1>Sampling methods</h1>
          <p class="fragment"><em>All Occurrence Sampling</em> to record <strong>foraging counts</strong> by the herons in our observation area</p>
          <p class="fragment"><em>Scan Sampling</em> with actual time units to record the <strong>general position</strong> of the herons within the area
        </section>

        <section id="scene8">
          <h1>Successful capture</h1>
        </section>

        <section id="scene9">
          <h1>Herons close to each other</h1>
        </section>
        
        <section id="scene10">
          <h1>Distance between herons</h1>
        </section>

        <section id="scene10a">
          <section>
          </section>
          <section id="scene10a-hidden">
            <h1><em>Magic</em> Formulas</h1>
            <p>$dist.\ from\ obj\ to\ camera$</p><p>$= \frac{focal\ length\ \> \times \> object\ height\ (mm) \> \times \> image\ height}{object\ height\ (px) \> \times \> sensor\ height}$</p>
            <br>
            <p>$x = \frac{dist.\ btwn\ objects\ (px) \> \times \> sensor\ width \> \times \> dist.\ from\ obj\ to\ camera}{focal\ length \> \times \> image\ width}$</p>
          </section>
        </section>

        <section id="scene11">
          <h1>Results</h1>
          <div class="anything">
          <!--
          {
            "initialize": "function(container) {
              return distToEfficiencyGraph(container);
            }"
          }
          -->
          </div>
        </section>

        <section id="scene12" data-background-video="videos/Exciting.mov" data-background-video-loop>
        </section>

        <section id="scene13">
          <small>Multiple herons feeding site</small>
        </section>

        <section id="scene14">
          <small>2 different videos of adult vs juvenile</small>
        </section>

        <section id="scene15">
          <h1>Limitations</h1>
          <ul>
            <li>Distance is measured using approximation, with uncertainty of about 1m</li>
            <li>Other factors affecting our observations</li>
          </ul>
        </section>

        <section id="scene15a" data-background-video="videos/Kingfisher.mov" data-background-video-loop>
        </section>

        <section id="scene16">
          <p>These results suggest that the presence of conspecifics adversely affects foraging efficiency, although we acknowledge that our study is limited by other factors</p>
        </section>

        <section id="scene17">
          <small>Video collage</small>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="lib/js/d3.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/math/math.js', async: true },
          { src: 'plugin/anything/anything.js' },
        ],

        anything: [
          {
            className: 'anything',
            initialize: function(container, options) {
              if (options && options.initialize) {
                options.initialize(container);
              }
            }
          }
        ]

      });

			// http://stackoverflow.com/a/10284006/559119
      // e.g. [[1, 11], [2, 22]] into [[1, 2], [11, 22]]
			function zip(arrays) {
				return arrays[0].map(function(_,i) {
					return arrays.map(function(array) { return array[i] });
				});
			}
      
      function distToEfficiencyGraph(container) {
        var width = 800,  // Width of <svg>.
            height = 400,  // Height of <svg>.
            padding = 50;  // Padding used for elements in <svg>.
            radius = 3;

        // Dataset.
        var x = [21.7, 23, 30.5, 12.87, 9.05, 90, 100, 40.94, 49.42, 46.94, 16.21, 15.92, 4.29],
            y = [0, 0, 6.3, 0, 0, 33.3, 50, 50, 0, 6.7, 12.5, 3.8, 2.1];
        var data = zip([x, y]);  // TODO: Sort by x values.

        // For mapping the original values to coordinates.
        var xAxis = d3.scale.linear().domain([0, 120]).range([0 + padding, width - padding]),
            yAxis = d3.scale.linear().domain([60, 0]).range([0 + padding, height - padding]);

        // Remove and append new <svg>.
        d3.select(container).selectAll('svg').remove();
        var svg = d3.select(container)
          .append('svg')
          .attr('width', width)
          .attr('height', height);

        // Draw x-axis and y-axis.
        var xAxisSvg = svg.append('g')
          .call(d3.svg.axis().scale(xAxis).orient('bottom'))
          .attr('class', 'axis')
          .attr('transform', 'translate(0, ' + (height - padding) + ')');
        var yAxisSvg = svg.append('g')
          .call(d3.svg.axis().scale(yAxis).orient('left'))
          .attr('class', 'axis')
          .attr('transform', 'translate(' + padding + ', 0)');

        // Draw circles.
        svg.selectAll('circle')  // Select all circles, and add data.
          .data(data)
          .enter()
          .append('circle')  // For each data, append a circle.
            .transition()
              .delay(function(d, i) { return i * 300; })  // Delay append in ms.
              .duration(1000)  // Animation duration in ms.
            .attr('fill', 'white')
            .attr('cx', function(d) { return xAxis(d[0]); })  // x-coordinate.
            .attr('cy', function(d) { return yAxis(d[1]); })  // y-coordinate.
            .attr('r', radius);

      };

      Reveal.addEventListener('slidechanged', function(event) {
        if (event.currentSlide.id === 'scene11') {
          distToEfficiencyGraph(d3.select(event.currentSlide).select('.anything')[0][0]);
        }
      });

    </script>

  </body>
</html>
